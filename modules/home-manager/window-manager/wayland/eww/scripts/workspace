# Workspace monitor for Sway
# Outputs workspace data as JSON for native eww widgets

# Get workspace state as JSON
workspaces() {
  swaymsg -t get_workspaces | jq -c '[.[] | {
    num: .num,
    name: .name,
    focused: .focused,
    visible: .visible,
    urgent: .urgent
  }]'
}

# Print initial workspaces
workspaces

# Listen for workspace changes
swaymsg -t subscribe -m '["workspace"]' | while read -r _; do
  workspaces
done
