# Dunst notification status for eww (polling loop)
# Returns: JSON with paused state and waiting count
# Example: {"paused": false, "waiting": 0}

get_status() {
  paused=$(dunstctl is-paused)
  waiting=$(dunstctl count waiting 2>/dev/null || echo 0)
  echo "{\"paused\": $paused, \"waiting\": $waiting}"
}

# Track previous state to only output on change
prev=""

# Poll every second and output on change
while true; do
  current=$(get_status)
  if [ "$current" != "$prev" ]; then
    echo "$current"
    prev="$current"
  fi
  sleep 1
done
